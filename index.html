<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>北斗的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="日常积累">
<meta property="og:type" content="website">
<meta property="og:title" content="北斗的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="北斗的博客">
<meta property="og:description" content="日常积累">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="北斗的博客">
<meta name="twitter:description" content="日常积累">
  
    <link rel="alternative" href="/atom.xml" title="北斗的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!--link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"-->
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">北斗的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">积累</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon">菜单</a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Jetspeed-指南-Customizing Your Portal Design翻译-02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/09/Jetspeed-指南-Customizing Your Portal Design翻译-02/" class="article-date">
  <time datetime="2016-04-09T01:08:32.000Z" itemprop="datePublished">2016-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/09/Jetspeed-指南-Customizing Your Portal Design翻译-02/">Jetspeed官方指南-自定义你的门户设计-02</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/tutorial/02/page-decoration.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="Page-Decorators"><a href="#Page-Decorators" class="headerlink" title="Page Decorators"></a>Page Decorators</h2><p>Each Jetspeed page can be associated with a different page decoration. Page decorations control some important aspect of a portal page: </p>
<p><em>每个Jetspeed页都可以关联一个不同的页面装饰器。页面装饰器控制着门户页面中一些重要的外表：</em></p>
<ul>
<li>The colors, images, CSS styles that skin this page</li>
<li>The header portion of the page</li>
<li>The page margins</li>
<li>The footer portion of the page</li>
<li>Menus displayed on the page</li>
<li><p>Action buttons displayed on the window</p>
</li>
<li><p><em>页面中的颜色，图片，样式</em></p>
</li>
<li><em>页面的头部位置</em></li>
<li><em>页面轮廓</em></li>
<li><em>页面的底部位置</em></li>
<li><em>页面中菜单的显示</em></li>
<li><em>窗口中活动按钮的显示</em></li>
</ul>
<p>Decorators do not control the placement of portlets. That is handled by layouts. Jetspeed comes with several page decorations out of the box. The default page decorator for most pages is simply called jetspeed. It looks like this: </p>
<p><em>装饰器不能控制组件的位置。那是由布局来管理的。Jetspeed配备了几个开箱即用的几个页面装饰器。大多数页面的默认装饰器叫做jetspeed。它看起来像这样：</em></p>
<p><img src="http://portals.apache.org/jetspeed-2/tutorial/images/02/jetspeed-page-decorator.png" alt="jetspeed-page-decorator"></p>
<p>We are going to create a new decorator for this tutorial. This new decorator can be copied into our project from the decorations/layout/jetexpress/ directory in tutorial-resources.zip. This will save you the trouble of creating all the logo images and CSS definitions. </p>
<p><em>在本指南中，我们要创建一个新的装饰器。新的装饰器可以将<a href="http://portals.apache.org/jetspeed-2/tutorial/downloads/tutorial-resources.zip" target="_blank" rel="external">tutorial-resources.zip</a>压缩包里的<code>decorations/layout/jetexpress/</code>目录拷贝到我们的项目中。这将减少你创建所有的徽标图像和CSS定义的麻烦。</em></p>
<p>In your project, under jetexpress-portal/src/main/webapp, create a directory decorations. Inside it, create a directory layout. From jetspeed-tutorial-resources.zip, copy the decorations/layout/jetexpress/ directory and all its files and subdirectories to jetexpress-portal/src/main/webapp/decorations/layout in your project. </p>
<p><em>在你的项目中的<code>jetexpress-portal/src/main/webapp</code>目录下，创建一个<code>decorations</code>目录。在它里边，创建一个<code>layout</code>目录。从<code>jetspeed-tutorial-resources.zip</code>压缩包里，拷贝<code>decorations/layout/jetexpress/</code>目录的全部文件和子目录，到你项目的<code>jetexpress-portal/src/main/webapp/decorations/layout</code>中。</em></p>
<h3 id="The-Header"><a href="#The-Header" class="headerlink" title="The Header"></a>The Header</h3><p>Open up the file decorations/layout/express-page/header.vm This is a Velocity template, very much like JSP but simpler, with no Java compilation required. Jetspeed does support JSP-based decorators. However no one has contributed one yet. We could spend a lot of time teaching you about all the macros available. But lets just concentrate on changing the logos first. </p>
<p><em>打开<code>decorations/layout/express-page/header.vm</code>文件，这是个Velocity模板，非常像JSP，只是简单些，没有Java编译的要求。Jetspeed不支持基于JSP的装饰器。不过说来还没有人贡献一个。我们可以花许多时间来教你关于可用的所有宏。但首先让我们仅仅专注于改变徽标。</em></p>
<p>Scroll down to the banner content (search for <div class="header">). Here we added our new left-hand side logo, consisting of a globe and the text ‘jetexpress’: </div></p>
<p><em>滚动到横幅内容（搜索<code>&lt;div class=&quot;header&quot;&gt;</code>）。我们在这儿添加新的左手边的徽标，由一个地球仪和一个’jetexpress’组成：</em></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">img</span> src=<span class="string">"#GetPageResource('images/earth.jpg')"</span> <span class="attribute">height</span>=<span class="string">"28"</span> width=<span class="string">"28"</span>/&gt;</span><br><span class="line">&lt;<span class="selector-tag">img</span> src=<span class="string">"#GetPageResource('images/jetexpress-logo.gif')"</span> <span class="attribute">height</span>=<span class="string">"28"</span> width=<span class="string">"131"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>#GetPageResource is a Velocity macro. It retrieves a resource (image, CSS, HTML) from the decoration folder, relative to the root of the jetexpress decoration folder. Besides the images, the header.vm is pretty much the same as the default Jetspeed decorator. In fact we simply copied the default decorator to get us started. This gives you a good start of customizing the page. </p>
<p><em><code>#GetPageResource</code>是一个Velocity宏。它从相对于jetexpress装饰器文件夹的根目录里取回一个资源（图片，样式，页面）。除了图片，<code>header.vm</code>与默认的Jetspeed装饰器几乎相同。其实我们仅仅拷贝了默认的装饰器，以便让我们开始。这使你的自定义页面有一个良好的开端。</em></p>
<h3 id="Velocity-Variables"><a href="#Velocity-Variables" class="headerlink" title="Velocity Variables"></a>Velocity Variables</h3><p>Velocity makes several variables about the context of a decoration available for dynamic substition of menus and content: </p>
<p><em>Velocity使用了几个装饰器上下文可用的变量 ，以便可以动态替换菜单和内容：</em></p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Desc</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>$layoutDecoration</td>
<td>Retrieve layout content from the decoration dir</td>
<td>$layoutDecoration.getResource(“decorator-macros.vm”)</td>
</tr>
<tr>
<td>$site</td>
<td>Retrieve menus by name</td>
<td>$site.getMenu(“pages”)</td>
</tr>
</tbody>
</table>
<h3 id="Menus"><a href="#Menus" class="headerlink" title="Menus"></a>Menus</h3><p>The remainder of header.vm is HTML markup mixed in with some important macros for displaying Jetspeed Menus. Jetspeed Menus are built from a collection of portal resources known as the Portal Site. The portal site is a content tree (like a file system) of portal resources. The site can be stored in the file system or in a database. Resources can be a page, folder, or link. Lets look at some of the available macros for displaying menus on your page. </p>
<p><em><code>header.vm</code>其余部分是混入一些重要的宏，用于显示Jetspeed菜单的HTML标记。Jetspeed菜单是由一个名为门户站点的门户资源集合创建的。门户站点是一颗门户资源的内容树（类似文件系统）。站点可以存储在文件系统或数据库里。资源可以是一个页面，文件夹，或链接。让我们看一些可以在你页面中显示菜单的有用的宏。</em></p>
<p>The $site always has the following menus available to you at any time: </p>
<p><em><code>$site</code>在任何时候总是有可供你使用的下面的菜单：</em></p>
<table>
<thead>
<tr>
<th>Menu</th>
<th>Desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>pages</td>
<td>relative pages menu of pages in the current folder. Used to define the page tabs above the portal. <br><br><em>（当前文件夹中页面的相对页面菜单。用来定义门户网站上面的页面选项卡。）</em></td>
</tr>
<tr>
<td>breadcrumbs</td>
<td>paths to page used to provide history links below the page tabs <br><br><em>（在页面选项卡的下面，用于提供页面历史链接的路径）</em></td>
</tr>
<tr>
<td>navigations</td>
<td>relative subfolders and root level links menu used to define the navigation pane beside the portal.<br><br><em>（相对子文件夹和根目录级别的链接菜单，用于定义门户旁边的导航面板）</em></td>
</tr>
<tr>
<td>back</td>
<td>parent folder menu used to define the single “back” link above the portal page tabs.<br><br><em>（父文件夹菜单，用于定义门户页面选项卡上方的单一“返回”链接）</em></td>
</tr>
</tbody>
</table>
<p>You can also define your own menus (not covered in this tutorial). </p>
<p><em>你还可以定义自己的菜单（在本指南中不涉及）。</em></p>
<p>There are some helper macros for creating different styles of menus. The macros are defined in the decorator-macros.vm file: </p>
<p><em>这有些用于创建不同样式菜单的有用的宏。宏定义在<code>decorator-macros.vm</code>文件中：</em></p>
<table>
<thead>
<tr>
<th>Macro</th>
<th>Decription</th>
</tr>
</thead>
<tbody>
<tr>
<td>#includeTabsNavigation($someMenu $LEFT_TO_RIGHT)</td>
<td>Displays a menu in a vertical tabbed navigation style.</td>
</tr>
<tr>
<td>#includeLinksNavigation($breadCrumb $LEFT_TO_RIGHT “” $BREADCRUMBS_STYLE “”)</td>
<td>Displays a menu of links according to a given style.</td>
</tr>
<tr>
<td>#includeNestedLinksWithIconNavigation($standardNavs $TOP_TO_BOTTOM)</td>
<td>Displays a nested top-to-bottom menu navigation of folders, links, and pages.</td>
</tr>
<tr>
<td>#PageActionBar()</td>
<td>Not a menu, but the available actions (edit, view, help, print…) for this page</td>
</tr>
</tbody>
</table>
<p>As you can see in header.vm, we get $site.getMenu(“navigations”) and display a nested top-to-bottom menu navigation through the #includeLinksWithIconNavigation macro: </p>
<p><em>正如你可以看到<code>header.vm</code>，通过<code>#includeLinksWithIconNavigation</code>宏，我们得到<code>$site.getMenu(&quot;navigations&quot;)</code>，显示了一个嵌套的由上到下的菜单导航：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Left Navigations Menu Table Data --&gt;</span></span><br><span class="line">#set($navigationsStandardMenu = $site.getMenu("navigations"))</span><br><span class="line"></span><br><span class="line">#if(!$navigationsStandardMenu.empty)</span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">"top"</span> <span class="attr">id</span>=<span class="string">"leftcol"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navcolumn"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">cellpadding</span>=<span class="string">"0"</span> <span class="attr">cellspacing</span>=<span class="string">"4"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">            #includeLinksWithIconNavigation($navigationsStandardMenu $TOP_TO_BOTTOM)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">#end</span><br></pre></td></tr></table></figure>
<h3 id="The-Footer"><a href="#The-Footer" class="headerlink" title="The Footer"></a>The Footer</h3><p>Open up decorations/layout/jetexpress/footer.vm. Here you can see the “Powered by Jetspeed” logo displayed in the page footer: </p>
<p><em>打开<code>decorations/layout/jetexpress/footer.vm</code>文件。在这儿你可以看到在页面底部显示的“Powered by Jetspeed”徽标。</em></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">img</span> src=<span class="string">"#GetPageResource('images/Jetspeed_blue_sm.png')"</span> alt=<span class="string">"Jetspeed 2 Powered"</span> <span class="attribute">border</span>=<span class="string">"0"</span> /&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/09/Jetspeed-指南-Customizing Your Portal Design翻译-02/" data-id="cimsgq7zs000anolodbjm7m2v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Jetspeed-指南-Customizing Your Portal Design翻译-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/08/Jetspeed-指南-Customizing Your Portal Design翻译-01/" class="article-date">
  <time datetime="2016-04-08T07:53:32.000Z" itemprop="datePublished">2016-04-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/08/Jetspeed-指南-Customizing Your Portal Design翻译-01/">Jetspeed官方指南-自定义你的门户设计-01</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/tutorial/02/customizing-overview.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="Decorator-and-Theme-Customization"><a href="#Decorator-and-Theme-Customization" class="headerlink" title="Decorator and Theme Customization"></a>Decorator and Theme Customization</h2><p>Now that your custom Jetspeed portal is up and running, let’s start customizing the portal design. The portal design, or skins, are known in Jetspeed as decorators and themes. With decorators and themes, you can customize the portal experience to the branding of your organization. In this tutorial, we will simply change a few images, CSS styles and colors to get you on your way. </p>
<p><em>现在你的Jetspeed自定义门户已经<a href="http://portals.apache.org/jetspeed-2/tutorial/01/run-it.html" target="_blank" rel="external">启动并运行了</a>，那么我们开始自定义门户的设计。门户设计，或者说是皮肤，在Jetspeed中被称为装饰器和主题。用装饰器和主题，你可以自定义门户体验到你机构的品牌化。在本指南中，我们将简单地改变一些图片，样式和颜色，以使你走向成功。</em></p>
<p>It is important to note that all of the changes made in this section are made in the build environment. The changes we are making here could just as easily be made using the portal’s live customization features. For example, you can drop a decorator or theme into the portal while its running. Jetspeed will pick it up automatically. Or, to customize a page, you can use the portlet customizer or desktop customizer, portlet selector, and site manager: all administrative portlets that work on your live portal. However, the point of configuring everything in a Maven build is to be able to easily reproduce portal environments for development, testing, and new deployments. </p>
<p><em>注意到重要的一点是：在这一章节中所做的全部改变都是在生成环境中进行的。我们在这里所做的更改，使用门户的活动自定义功能也一样可以轻易实现。比如，你可以在门户运行时，往里拖进一个装饰器或主题。Jetspeed将自动检出它来。或者，要自定义一个页面，你可以使用组件定制器或桌面定制器，组件选择器，以及站点管理：在你的活动门户里工作的全部管理类组件。然而，在Maven构建中配置一切，能够轻松重现为开发，测试和部署的门户环境。</em></p>
<p>This section of the tutorial covers customizing: </p>
<p><em>本指南的这个章节包含的自定义有：</em></p>
<ul>
<li>Portal Skins (or Decorators). We replace the default logo, colors, and page header and footers with our own.</li>
<li>Portal Themes. Same as Portal Skins, but themes apply to the Jetspeed Desktop.</li>
<li><p>Configuring the default portal page to use these new decorators and themes</p>
</li>
<li><p><em>门户皮肤（或装饰器）。我们将默认的logo，颜色，页面头部和底部替换成我们自己的。</em></p>
</li>
<li><em>门户主题。与门户皮肤一样，但主题同样适用于 Jetspeed 桌面。</em></li>
<li><em>配置默认的门户页来使用新的装饰器和主题。</em></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/08/Jetspeed-指南-Customizing Your Portal Design翻译-01/" data-id="cimsgq7zl0005nolo4cto68zh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Jetspeed-Decorators翻译" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/07/Jetspeed-Decorators翻译/" class="article-date">
  <time datetime="2016-04-07T03:21:30.000Z" itemprop="datePublished">2016-04-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/07/Jetspeed-Decorators翻译/">Jetspeed官方手册-Decorators</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/devguide/guide-decorators.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="Introduction-to-Decorators"><a href="#Introduction-to-Decorators" class="headerlink" title="Introduction to Decorators"></a>Introduction to Decorators</h2><p>Decorators are defined as any static or semi-static markup surrounding a dynamically generated Fragment. Decorators are usually written with either Velocity or JSP templates. This guide will focus primarily on using the Velocity scripting language to build decoration. However, most of the standards and approaches described here can be applied to writing decroations in other scripting languages. </p>
<p><em>装饰器被定义为任何静态或准静态的标记周围动态生成的片段。装饰器通常由Velocity或JSP模板编写。本手册将主要聚焦在用Velocity脚本语言来创建装饰器。然而，大多数标准和这里描述的方法也适用于用其他的脚本语言来书写装饰器。</em></p>
<p>There are two different types of decorations that are used when building a page; Portlet and Layout (or page). </p>
<p><em>当装饰器用于构建页面；portlet和布局（或页面）时，分为两种不同的类型。</em></p>
<p>Portlet decorations are the “window dressings” of Jetspeed. They wrap each indivual portlet fragment’s rendered content with HTML (XHTML, VXML, etc). Portlet decoration’s are responsible for displaying the appropriate title and any buttons associated with changing window states or portlet modes. </p>
<p><em>Portlet装饰器是Jetspeed的“窗口装饰”。它们用HTML（XHTML，VXML等）包裹每个个体portlet片段的渲染后内容。在改变窗口状态或portlet模式时，Portlet装饰器负责显示适当的标题和任一有关联的按钮。</em></p>
<p>Layout or Page decorations responsible for providind a “header” area and “footer” area for a single portal page which is represented by a .psml document (see: Documentation for Designers working with PSML for more information on psml). They also provide general style information for the page and portlets. However, portlet level style settings can be overidden at the portlet decoration level.</p>
<p><em>布局或页面装饰器负责为一个由.psml文档所描绘的单独门户页面提供一个“头部”区域和“底部”区域（见：设计者使用PSML文档，获得psml的详细信息）。它们还为页面和portlet提供通用的样式信息。然而，portlet级的样式设置可以覆盖portlet装饰器级的样式。</em></p>
<h2 id="Decoration-File-Structure"><a href="#Decoration-File-Structure" class="headerlink" title="Decoration File Structure"></a>Decoration File Structure</h2><p>All decorations are stored in a directory directly off of the web applications root called decorations. The two primary directories under the here are layout for layout decorations and portlet for portlet decorations. Individual decoartions are housed in their own directories underneath these two directories. The name of the directory you create for under either layout or portlet is how Jetspeed will locate your decoration. We will go into further detail on how this works later on in this guide. </p>
<p><em>全部装饰器都存储在一个名为decorations的目录中，此目录直接位于web应用程序根目录。在它下面有两个主要的目录，布局装饰器使用layout目录，portlet装饰器使用portlet目录。在这两个目录下，单独的装饰器被放置在它们自己的目录里。无论是在布局还是在portlet下，Jetspeed将会依据你所创建的目录名称定位到你的装饰器。在本手册后面，我们将更详细地介绍它是如何工作的。</em></p>
<h2 id="Anatomy-of-a-Layout-Page-Decoration"><a href="#Anatomy-of-a-Layout-Page-Decoration" class="headerlink" title="Anatomy of a Layout(Page) Decoration"></a>Anatomy of a Layout(Page) Decoration</h2><h3 id="Four-Files-in-a-Nutshell"><a href="#Four-Files-in-a-Nutshell" class="headerlink" title="Four Files in a Nutshell"></a>Four Files in a Nutshell</h3><p>In it’s most basic form a Layout Decroation only requires you to define four files: </p>
<p><em>大多数时候，在一个布局装饰器中，基本上你只需要定义四个文件：</em></p>
<ul>
<li>decorator.properties</li>
<li>styles.css</li>
<li>header.vm</li>
<li>footer.vm</li>
</ul>
<p>Three of these files; decorator.properties, header.vm, and footer.vm go directly into the directory you create under /decorations/layout. The styles.css needs to be put into a subdirectory of your decoration names css/. </p>
<p><em><code>decorator.properties</code>，<code>header.vm</code>，<code>footer.vm</code>这三个文件直接放置在<code>/decorations/layout</code>下面的你所创建的目录下。<code>styles.css</code>文件需要放置在你的装饰器的名为<code>css</code>的子目录下。</em></p>
<h3 id="Basic-Layout-Decoration-Configuration-decorator-properties"><a href="#Basic-Layout-Decoration-Configuration-decorator-properties" class="headerlink" title="Basic Layout Decoration Configuration: decorator.properties"></a>Basic Layout Decoration Configuration: decorator.properties</h3><p>The decorator.properties file holds basic information about your layout decoration. In all actuallity, this file can be blank, but we still require that it be present as it is used by other APIs to “discover” available decorations. With that being said, it is safe to assume that all the properties defined below are optional. </p>
<p><em><code>decorator.properties</code>文件保存着你的布局装饰器的基本信息。老实说，这个文件可以是空白的，但我们还是要求它能显示出这是个能用的装饰器，以便被其他APIs“发现”。之前说过了，它是安全地假设，下面定义的所有属性都是可选的。</em></p>
<table>
<thead>
<tr>
<th>Property Name</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>base.css.class</td>
<td>This value is generally placed in the top most element tag of your header template. You will see how it is used when we go into development of a header template.<br><br><em>（这个值通常放置在你的头部模板的很多元素标签的顶端。当我们开发一个头部模板时，你将会看到它是如何使用的。）</em></td>
<td>Defaults to the name of your decoration</td>
</tr>
<tr>
<td>stylesheet</td>
<td>Relative path to your decoration’s stylesheet</td>
<td>css/styles.css</td>
</tr>
<tr>
<td>header</td>
<td>Relative path to your decoration’s header template</td>
<td>header.vm</td>
</tr>
<tr>
<td>footer</td>
<td>Relative path to your decoration’s footer template</td>
<td>footer.vm</td>
</tr>
</tbody>
</table>
<h3 id="Top-o’-the-Page-to-ya-header-vm"><a href="#Top-o’-the-Page-to-ya-header-vm" class="headerlink" title="Top o’ the Page to ya: header.vm"></a>Top o’ the Page to ya: header.vm</h3><p>The header.vm represents the top portion of your portal page. Below is a section by section walkthrough of the basics required to write a functional header template. </p>
<p><em><code>header.vm</code>代表你门户页面的顶部。下面是逐节演练的写入功能页眉模板所需的基础知识。</em></p>
<p>NOTICE: It is assumed that the reader is proficient in both the use of HTML and CSS. A rudimentary knowledge of Velocity helps but is not required to develop a decoration. </p>
<p><em>注意：假设读者是精通使用HTML和CSS的。具有Velocity基础知识会有助于开发装饰器，但不是必须的。</em></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;html&gt;</span></span><br><span class="line">   <span class="section">&lt;head&gt;</span></span><br><span class="line">     <span class="comment">#defineLayoutObjects()</span></span><br></pre></td></tr></table></figure>
<p>The first two lines should be obvious, if they are not, this guide from here on out will not be much help to you ;-) </p>
<p><em>前两行应该是显而易见的，如果你不这样认为，那从这儿开始，本手册将不会给你很大帮助。</em>;-) </p>
<h3 id="Our-First-Macro-defineLayoutObjects"><a href="#Our-First-Macro-defineLayoutObjects" class="headerlink" title="Our First Macro: #defineLayoutObjects()"></a>Our First Macro: #defineLayoutObjects()</h3><p>Now the line containing #defineLayoutObjects() will not be as obvious in its purpose as the previous two. #defineLayoutObjects() is what is known, in Velocity vernacular, as a macro. A macro is a predefined snippet of Velocity code that can be reused within any Velocity template. All of the global macros we will be using (including this one) are defined within the WEB-INF/jetspeed_macros.vm. Later in this guide we will discuss supplying your own, custom macros for assisting you in your decoration development, if you choose to. Now, back to the #defineLayoutObjects(). #defineLayoutObjects() adds values to Velocity that will be accessible within header.vm, footer.vm, other macros and all of your portlet decoration templates. We could easily stop here regarding #defineLayoutObjects(), however, I feel it can be helpful to have some insights into the inner workings of Velocity for the uninitiated. With out further ado, the code: </p>
<p><em>现在包含了<code>#defineLayoutObjects()</code>的这一行的用途就不像前两个那样明显了。什么会明白<code>#defineLayoutObjects()</code>呢，在Velocity语境中，它被当做一个宏。宏是Velocity的预定义代码段，它可以在任意Velocity模板中复用。我们要使用的所有的全局宏（包括这个）是在<code>WEB-INF/jetspeed_macros.vm</code>中定义的。在本手册的后面，我们将会详述提供你自己的，定制的宏，来协助你进行装饰器开发，如果你想要的话。现在，回到<code>#defineLayoutObjects()</code>。<code>#defineLayoutObjects()</code>向Velocity中添加了值，它可以被<code>header.vm</code>，<code>footer.vm</code>，其他的宏，以及你全部的装饰器模板使用。我们可以轻松地就在这儿停止关于<code>#defineLayoutObjects()</code>的讨论，然而，我觉得对新手来说，了解一些Velocity的内部工作是有帮助的。进一步，看代码： </em></p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#macro (defineLayoutObjects)</span><br><span class="line">    #set($preferedLocale = $JS2RequestContext.locale)</span><br><span class="line">    #set($rootFragment = $jetspeed.currentFragment)</span><br><span class="line">    #set($site = $request.getAttribute(<span class="string">"org.apache.jetspeed.portalsite.PortalSiteRequestContext"</span>))</span><br><span class="line">    #set($theme = $request.getAttribute(<span class="string">"org.apache.jetspeed.theme"</span>))</span><br><span class="line">    #set($layoutDecoration = $theme.getDecoration($rootFragment))</span><br><span class="line">#end</span><br></pre></td></tr></table></figure>
<p>Hmm. What is actually happening here. Okay first off we have, #set(), this is what is known as a directive in Velocity. A directive is built-in functionallity and not a macro. #set() is pretty straight forward in that it takes the value on the right of the = and assigns it to the left. Cool, that seems fairly straight forward. But how does one work with these values and where the heck did $JS2RequestContext.locale come from? I guess i should take a quick step back and describe how we work with objects in Velocity. All objects available to a Velocity template can be referenced via the $someObject notation. Knowing that much invoking a method , let’s getFoo(), can be done just like this $someObject.getFoo(). Even cooler is the fact we can short-hand getter methods that don’t take any arguments like this, $someObject.foo. As for this $JS2RequestContext this is actually an instance of the org.apache.jetspeed.RequestContext that has been availble to Velocity by Jetspeed itself. So, by looking the javadoc for org.apache.jetspeed.RequestContext we see $JS2RequestContext.locale will give us an instance of java.util.Locale that represents the locale of the current user. Couldn’t be much simpler than that could it?</p>
<p><em>嗯。这儿实际上发生了什么。好的，我们首先<code>set()</code>，在Velocity里它被认作是一条指令。指令是内置的函数，不是宏。<code>set()</code>直接地把=右边的值赋给了左边。酷，这似乎是相当直截了当。但是这些值怎样做一项工作，并且<code>$JS2RequestContext.locale</code>从哪儿来的呢？我想我应该快退一步，描述一下在Velocity中我们的对象是如何工作的。在Velocity模板中，我们可以通过<code>$someObject</code>符号获得所有对象的引用。知道这些了，就能调用一个方法，让我们调用<code>getFoo()</code>，就能像<code>$someObject.getFoo()</code>这样来使用。更酷的是，事实上我们可以不带任何参数，就能快捷地获得方法，像这样，<code>$someObject.foo</code>。至于这个<code>$JS2RequestContext</code>，事实上它是Jetspeed自己通过Velocity获得的一个<code>org.apache.jetspeed.RequestContext</code>实例。因此，通过查看<code>org.apache.jetspeed.RequestContext</code>的javadoc，我们知道了<code>$JS2RequestContext.locale</code>会给我们一个<code>java.util.Locale</code>实例，它表示当前用户的区域设置。不能比这再简单了，不是吗？</em>  </p>
<p>Next up we have this line #set($rootFragment = $jetspeed.currentFragment) another set() statement, this time creating an object called $rootFragment which is an instance of org.apache.jetspeed.om.page.ContentFragment. It is really not relevant to this guide to describe what $jetspeed.currentFragment is doing so I am going to skip that and move on. </p>
<p><em>下一步我们到了<code>#set($rootFragment = $jetspeed.currentFragment)</code>这行，另一个<code>set()</code>声明，此时创建了一个名为<code>$rootFragment</code>的对象，它是一个<a href="http://portals.apache.org/jetspeed-2/apidocs/org/apache/jetspeed/om/page/ContentFragment.html" target="_blank" rel="external">org.apache.jetspeed.om.page.ContentFragment</a>的实例。本手册真的不是要描述<code>$jetspeed.currentFragment</code>要做什么，所以我要跳过这儿，并继续前行。</em></p>
<figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">set</span>(<span class="built_in">$site</span> = <span class="built_in">$request</span>.getAttribute(<span class="string">"org.apache.jetspeed.portalsite.PortalSiteRequestContext"</span>))</span><br><span class="line">#<span class="keyword">set</span>(<span class="built_in">$theme</span> = <span class="built_in">$request</span>.getAttribute(<span class="string">"org.apache.jetspeed.theme"</span>))</span><br></pre></td></tr></table></figure>
<p>Ah $request, now that looks familiar, this is actually an instance of javax.servlet.http.HttpServletRequest from which we are retreiving objects that were been placed into Velocity by Jetspeed. The actual objects are: org.apache.jetspeed.portalsite.PortalSiteRequestContext and org.apache.jetspeed.decoration.Theme respectively. We will put all of these objects to good use in just a little while. </p>
<p><em>啊<code>$request</code>，现在，看起来很熟悉，实际上这是个<code>javax.servlet.http.HttpServletRequest</code>实例，它来自被Jetspeed放到Velocity中的我们要检索的对象。实际的对象分别是：<a href="http://portals.apache.org/jetspeed-2/apidocs/org/apache/jetspeed/portalsite/PortalSiteRequestContext.html" target="_blank" rel="external">org.apache.jetspeed.portalsite.PortalSiteRequestContext</a>和<a href="http://portals.apache.org/jetspeed-2/apidocs/org/apache/jetspeed/decoration/Theme.html" target="_blank" rel="external">org.apache.jetspeed.decoration.Theme</a>。一会儿我们要好好利用所有的这些对象。</em></p>
<h3 id="Feed-Your-HEAD-How-to-Properly-Code-Your-Head-Tag"><a href="#Feed-Your-HEAD-How-to-Properly-Code-Your-Head-Tag" class="headerlink" title="Feed Your HEAD: How to Properly Code Your Head Tag."></a>Feed Your HEAD: How to Properly Code Your Head Tag.</h3><p>This section provides you with all the information to properly code the <head> of your Layout decroation. So, straight to the code. </head></p>
<p><em>这节给你的全部信息能使你正确地编写你的布局装饰器的<code>&lt;head&gt;</code>。那么，直接来看代码。</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">     #defineLayoutObjects()</span><br><span class="line">     </span><br><span class="line">     <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">"#BaseHref()"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-type"</span> <span class="attr">content</span>=<span class="string">"#ContentType()"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-style-type"</span> <span class="attr">content</span>=<span class="string">"text/css"</span> /&gt;</span>   </span><br><span class="line">     #includeJavaScriptForHead()</span><br><span class="line">     #IncludeStylesheets()    </span><br><span class="line">     <span class="tag">&lt;<span class="name">title</span>&gt;</span>#PageTitle()<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"#PageDescription()"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>The <base> Tag</p>
<p><em><code>&lt;base&gt;</code>标签</em></p>
<p>First off we have <base href="#BaseHref()"> which allows us to define the base path for resolution of web resources, for an in depth discussion of the <base> see: W3C Schools Reference. If you have spent any time playing with Jetspeed, you will have noticed it does all sorts of crazy URL rewriting that will totally hose any attempts to consistently path you html and styles sheets. By defining the BASE tag, this probelms will all but disappear. As for the #BaseHref() macro, it simply generates a fully qualified path to your web application’s root. The actual code, interms of the servlet api is synonimous with this: </p>
<p><em>首先我们获得<code>&lt;base href=&quot;#BaseHref()&quot;&gt;</code>，允许我们定义解析web资源的基本路径，要深入讨论<code>&lt;base&gt;</code>，请看：<a href="http://www.w3schools.com/tags/tag_base.asp" target="_blank" rel="external">W3C Schools Reference</a>。如果你花时间来玩Jetspeed，你将会注意到它做了各种疯狂的URL重写，    试图用一致的路径全部连通你的页面和样式表。通过定义BASE标签，这个问题将不复存在。对于<code>#BaseHref()</code>宏，它只是生成了到你的web应用程序的根目录的完全限定的路径。实际的代码，根据servlet api等同于这样：</em>  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HttpServletRequest request;</span><br><span class="line">StingBuffer baseHref = <span class="built_in">new</span> StringBuffer(request.getScheme())</span><br><span class="line">     .<span class="built_in">append</span>(<span class="string">"://"</span>).<span class="built_in">append</span>(request.getServerName())</span><br><span class="line">	 .<span class="built_in">append</span>(<span class="string">":"</span>).<span class="built_in">append</span>(request.getServerPort())</span><br><span class="line">	 .<span class="built_in">append</span>(request.getContextPath()).<span class="built_in">append</span>(<span class="string">"/"</span>);</span><br><span class="line"><span class="keyword">return</span> baseHref.toString();</span><br></pre></td></tr></table></figure>
<p>The actual Velocity macro code is a bit more terse ;)<br><em>实际的Velocity宏代码更简洁。</em> ;) </p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;</span>request.scheme&#125;<span class="symbol">://</span><span class="variable">$&#123;</span>request.serverName&#125;<span class="symbol">:</span><span class="variable">$&#123;</span>request.serverPort&#125;<span class="variable">$&#123;</span>request.contextPath&#125;/</span><br></pre></td></tr></table></figure>
<p>Meta Tag: <meta http-equiv="Content-type" content="#ContentType()"></p>
<p>Will return text/html plus the proper encoding, such as UTF. </p>
<p><em>将要返回<code>text/html</code>+适当的编码，比如UTF。</em></p>
<p>#includeJavaScriptForHead()</p>
<p>At the time of the writing of this guide there is really very little javascript required to for the base Jetspeed 2 server to run. However this may change in near future as we try to employ the use of AJAX in things such as configuration and administration. </p>
<p><em>在写本手册的时候，真的很少有需要基于Jetspeed2服务运行的javascript。但是，在不久的将来这也许会发生变化，比如我们尝试使用AJAX去做像配置和管理这样的事情。</em></p>
<h2 id="JSP-Decorators"><a href="#JSP-Decorators" class="headerlink" title="JSP Decorators"></a>JSP Decorators</h2><p>The JSP decorators are only currently supported in the tigris decorator. The JSP decorators are not enabled by default. JSP decorators can be enabled by modifying (properly commented) settings in:</p>
<p><em>目前只有tigris装饰器支持使用JSP装饰器。JSP装饰器不是默认启用的。通过修改（恰当的注释）设置可以启用JSP装饰器：</em></p>
<ul>
<li>decorators/layout/tigris/decorator.properties</li>
<li>decorators/portlet/tigris/decorator.properties</li>
<li>WEB-INF/templates/layout/html/columns/layout.properties</li>
<li>WEB-INF/templates/layout/html/maximized/layout.properties</li>
<li>WEB-INF/templates/layout/html/solo/layout.properties</li>
</ul>
<p>Note: you need to change the settings in <em>all</em> of the above properties files, and then restart jetspeed. </p>
<p><em>注意：你需要在上面所有的配置文件中都做修改，然后重启Jetspeed。</em></p>
<p>Also note: for the tcolumns template there isn’t a JSP replacement (yet), but that isn’t much used anyway AFAIK. Just to be sure: don’t switch your page layout portlet(s) from columns to tcolumns, otherwise your page will be be broken. </p>
<p><em>另外注意：尽管tcolumns模板不是一个JSP的替代品，但据我所知，它无论如何用到的都不多。可以肯定的是：不要将你的页面布局portlet从列转换到tcolumns，否则你的页面将会被破坏。</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/07/Jetspeed-Decorators翻译/" data-id="cimsgq7z30000nolooexkhiov" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Jetspeed-PSML翻译" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/06/Jetspeed-PSML翻译/" class="article-date">
  <time datetime="2016-04-06T09:48:13.000Z" itemprop="datePublished">2016-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/06/Jetspeed-PSML翻译/">Jetspeed官方手册-PSML</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/devguide/guide-psml.html" target="_blank" rel="external">原文地址</a><br><a href="http://blog.csdn.net/peterwanghao/article/details/667890" target="_blank" rel="external">网上已有的翻译</a></p>
<h2 id="PSML"><a href="#PSML" class="headerlink" title="PSML"></a>PSML</h2><ul>
<li>Page<ul>
<li>Layout Fragments</li>
<li>Portlet Fragments</li>
<li>Fragment References</li>
<li>Fragment Properties</li>
<li>Portlet Preferences</li>
</ul>
</li>
<li>Dynamic Page</li>
<li>Page Template<ul>
<li>Page Fragment</li>
</ul>
</li>
<li>Fragment Definition</li>
<li>Folder</li>
<li>Link</li>
<li>Global Page Security</li>
<li>Titles and Metadata</li>
<li>Defaults</li>
<li>Security Constraints</li>
<li>Menus</li>
<li>PSML Document XML Schemas</li>
</ul>
<p>PSML is an acronym for Portal Structure Markup Language. It was created to allow content structure and abstraction within Jetspeed. PSML defines how portlets are aggregated, laid out, and decorated on a portal page. Note that page layout is not a part of the Java Portlet Standard API. Thus PSML is a Jetspeed-specific implementation. Also note that PSML in Jetspeed-2 is different from PSML in Jetspeed-1. This document can be used as a reference guide to the elements of a PSML resource. </p>
<p><em>PSML是Portal Structure Markup Language（门户结构标记语言）的缩写。它是用来在Jetspeed中进行内容结构化和抽象的。PSML定义了在一个门户页面中portlet如何聚合，布局，以及装饰。注意：页面布局并不是Java Portlet标准接口的一部分。因此PSML是一个Jetspeed特殊的实现。还要注意到，Jetspeed-2中的PSML不同于Jetspeed-1中的PSML。这篇文档可被用作PSML资源元素的参考指南，</em></p>
<p>PSML files capture portal site information related to pages, folders, links, and global security constraints for the portal. PSML elements can be defined in separate documents arranged in a hierarchy of directories in the file system. The folder structure of the PSML documents mirrors the portal URL space. Typically, the PSML root directory is accessed as a resource at /WEB-INF/pages within the jetspeed web application. It is also possible to store PSML definitions in the database; the folder and document arrangement of the PSML hierarchy is maintained there as well. </p>
<p><em>PSML文件捕获门户站点页面，文件夹，链接，以及全局安全约束相关的信息。PSML元素可以被定义到布置在文件系统的目录层次结构的不同文档中。PSML文档的文件夹结构镜像了门户的url空间。通常，被当做资源来访问的PSML根目录就是Jetspeed应用的<code>/WEB-INF/pages</code>。它还可能将PSML定义存储到数据库；PSML文件夹和文档配置的层次结构也在那里维护。</em></p>
<p>The following PSML documents/elements are defined below: </p>
<p><em>下面是PSML文档或元素的定义：</em></p>
<p>Externally defines fragments to be referenced from multiple pages or page templates. Fragment references are used to refer to fragment definitions. Fragment definitions cannot contain references to other fragment definitions. Only one fragment definition per fragment id can be defined per folder. </p>
<p><em>来自多个页面或页面模板的外部定义的片段会被引用。片段引用被用来命名片段定义。片段定义不能包含其他片段定义的引用。每个片段只能有一个片段定义作为每个文件夹的标识。</em></p>
<table>
<thead>
<tr>
<th>PSML Element</th>
<th>Document</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Page</td>
<td>*.psml</td>
<td>Defines a single portal page within the portal at a specific portal URL. Page definitions will be augmented by a page template, if found, in current or parent folders. Pages are primarily composed of fragments which are mapped to individual portlets. Pages can also include fragment references to separately defined fragment references. <br><em>（在门户中用具体的url定义一个单独的页面。页面定义将由一个页面模板填充，如果可以在当前或父文件夹中找到。页面主要由映射到单独的portlet的片段组成。页面还可以包含片段引用，来分离定义片段引用。）</em></td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td>Dynamic Page</td>
<td>*.dpsml</td>
<td>Defines a reusable portal page used with matching content URLs within the portal. Like page definitions, dynamic pages will be augmented by page templates and are made up of fragments and fragment references. Dynamic pages are matched to portal content page requests by URL and content type mappings: matching pages are selected from current or parent folders. Only one dynamic page per content type should be defined per folder. <br><em>（定义一个可复用的门户页面，用于匹配门户中的内容网址。就像页面定义，动态页面将会被页面模板填充，它是由片段和片段引用组成。通过url和内容类型映射：从当前或父文件夹中匹配的页面会被选中，动态页匹配到门户内容页请求。每个内容类型只能有一个动态页作为每个文件夹的定义。）</em></td>
</tr>
<tr>
<td>Page Template</td>
<td>*.tpsml</td>
<td>Defines fragment and fragment references that are to be included in all concrete and dynamic pages. An individual page template is selected from within the current page or parent folders. A special page fragment is used to define where in the page template current page fragments are inserted. Only one page template can be defined per folder.   <br><em>（定义片段和片段引用被包含在所有具体和动态页面中。从当前页或父文件夹中选中单独的页面模板。页面模板中指定的页面片段用来定义被插入的当前页面片段。每一个文件夹只能有一个页面模板。）</em></td>
</tr>
<tr>
<td>Fragment Definition</td>
<td>*.fpsml</td>
<td></td>
</tr>
<tr>
<td>Folder</td>
<td>folder.metadata</td>
<td>Defines metadata associated with the file system folder or URL path. As one would expect, only one set of metadata information can be associated with a folder. With the exception of content URLs, the hierarchical structure defined by folders and pages defines the portal URL space.<br><em>（定义元数据与文件系统文件夹或url路径相关联。正如大家所料，一个元数据信息的设置只能关联到一个文件夹。除了内容链接，由文件夹和页面定义的层次结构能定义门户的链接空间。）</em></td>
</tr>
<tr>
<td>Link</td>
<td>*.link</td>
<td>Defines URL links to external or local resources used in portal menus.<br><em>（定义URL链接到外部或局部资源，供门户菜单中使用。）</em></td>
</tr>
<tr>
<td>Global Page Security</td>
<td>page.security</td>
<td>Defines global securuty constraint definitions and defaults for all portal pages and folders. <br><em>（定义全局安全约束定义，作为所有门户页面和文件夹的默认值。）</em></td>
</tr>
</tbody>
</table>
<p>Here is an example PSML file for a portal site page, (*.psml): </p>
<p><em>这是一个门户站点页面的PSML文件示例，(</em>.psml)：*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">page</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- page info --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to Jetspeed 2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"fr"</span>&gt;</span>Ma Premiere Page de PSML<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>¡Bienvenido a Jetspeed 2!<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"hu"</span>&gt;</span>Köszönti a Jetspeed 2!<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- page decoration --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaults</span> <span class="attr">skin</span>=<span class="string">"orange"</span> <span class="attr">layout-decorator</span>=<span class="string">"tigris"</span> <span class="attr">portlet-decorator</span>=<span class="string">"tigris"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- page fragments --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"100393"</span> <span class="attr">type</span>=<span class="string">"layout"</span> <span class="attr">name</span>=<span class="string">"jetspeed-layouts::VelocityOneColumn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"100939"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"j2-admin::LocaleSelector"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span>                                </span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"100345"</span> <span class="attr">type</span>=<span class="string">"layout"</span> <span class="attr">name</span>=<span class="string">"jetspeed-layouts::VelocityTwoColumns"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sizes"</span> <span class="attr">value</span>=<span class="string">"33%,66%"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"100121"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"j2-admin::LoginPortlet"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"column"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span>                                </span><br><span class="line">      <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"100171"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"demo::UserInfoTest"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"column"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- security constraints --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">security-constraints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security-constraints-ref</span>&gt;</span>public-view<span class="tag">&lt;/<span class="name">security-constraints-ref</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">security-constraints</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">page</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file for portal site dynamic page, (*.dpsml): </p>
<p><em>这是一个门户站点动态页面的PSML文件示例，(</em>.dpsml)：*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">dynamic-page</span> <span class="attr">content-type</span>=<span class="string">"*"</span> <span class="attr">inheritable</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Jetspeed 2 Portals Content<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"default-content-layout"</span> <span class="attr">type</span>=<span class="string">"layout"</span> <span class="attr">name</span>=<span class="string">"jetspeed-layouts::VelocityTwoColumns"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sizes"</span> <span class="attr">value</span>=<span class="string">"80%,20%"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"default-content-dynamic-content"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"j2-admin::DynamicWebContentPortlet"</span> <span class="attr">decorator</span>=<span class="string">"gray-gradient-noborder"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"column"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">"SRC"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://portals.apache.org/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">preference</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">"PORTALPATH"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/content/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">preference</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment-reference</span> <span class="attr">id</span>=<span class="string">"default-content-wp-reference"</span> <span class="attr">refid</span>=<span class="string">"wp-definition"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"column"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment-reference</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dynamic-page</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file for portal site page template, (*.tpsml): </p>
<p><em>这是一个门户站点页面模板的PSML文件示例，(</em>.tpsml)：*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">page-template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Portal Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"template-top"</span> <span class="attr">type</span>=<span class="string">"layout"</span> <span class="attr">name</span>=<span class="string">"jetspeed-layouts::VelocityOneColumn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">page-fragment</span> <span class="attr">id</span>=<span class="string">"template-top-page-template"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">page-fragment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"template-top-login"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"j2-admin::LoginPortlet"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span>                                </span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment-reference</span> <span class="attr">id</span>=<span class="string">"template-top-wp-reference"</span> <span class="attr">refid</span>=<span class="string">"wp-definition"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"row"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fragment-reference</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">page-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file for portal site fragment definition, (*.fpsml): </p>
<p><em>这是一个门户站点片段定义的PSML文件示例，(</em>.fpsml)：*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">fragment-definition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Current Weather<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">id</span>=<span class="string">"wp-definition"</span> <span class="attr">type</span>=<span class="string">"portlet"</span> <span class="attr">name</span>=<span class="string">"demo::WeatherPortlet"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fragment-definition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file that defines portal site folder, (folder.metadata): </p>
<p><em>这是一个定义门户站点文件夹的PSML文件示例，(folder.metadata)：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">folder</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- folder description --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Root Folder<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"fr"</span>&gt;</span>Répertoire racine<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>Carpeta raiz<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- default page decorations --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">defaults</span> <span class="attr">layout-decorator</span>=<span class="string">"tigris"</span> <span class="attr">portlet-decorator</span>=<span class="string">"tigris"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- order of documents in folder --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">document-order</span>&gt;</span>Jetspeed2.link<span class="tag">&lt;/<span class="name">document-order</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">document-order</span>&gt;</span>Jetspeed2Wiki.link<span class="tag">&lt;/<span class="name">document-order</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">document-order</span>&gt;</span>apache_portals.link<span class="tag">&lt;/<span class="name">document-order</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">document-order</span>&gt;</span>apache.link<span class="tag">&lt;/<span class="name">document-order</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- portal site menus --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">menu</span> <span class="attr">name</span>=<span class="string">"page-navigations"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">separator</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>Top Pages<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">xml:lang</span>=<span class="string">"fr"</span>&gt;</span>Page haut<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>Páginas más populares<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">separator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">options</span>&gt;</span>/Administrative<span class="tag">&lt;/<span class="name">options</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">separator</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>Profiled Pages<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>Páginas del Perfil<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">separator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">options</span> <span class="attr">regexp</span>=<span class="string">"true"</span>&gt;</span>/p[0-9][0-9][0-9].psml<span class="tag">&lt;/<span class="name">options</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">separator</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>Non Java Pages<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>Ejemplos sin java<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">separator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">options</span>&gt;</span>/non-java<span class="tag">&lt;/<span class="name">options</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- security constraints --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">security-constraints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security-constraints-ref</span>&gt;</span>public-view<span class="tag">&lt;/<span class="name">security-constraints-ref</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">security-constraints</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">folder</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file for a portal site link, (*.link): </p>
<p><em>这是一个门户站点链接的PSML文件示例，(</em>.link)：*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">target</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- link description --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Jetspeed 2 Home Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://portals.apache.org/jetspeed-2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">xml:lang</span>=<span class="string">"es"</span>&gt;</span>Jetspeed 2<span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Here is an example PSML file for the portal site page security, (page.security): </p>
<p><em>这是一个门户站点页面安全的PSML文件示例，(page.security)：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">page-security</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- global admin constraints --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">security-constraints-def</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">roles</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">roles</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">permissions</span>&gt;</span>view, edit<span class="tag">&lt;/<span class="name">permissions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">security-constraints-def</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">global-security-constraints-ref</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">global-security-constraints-ref</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- public constraints --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">security-constraints-def</span> <span class="attr">name</span>=<span class="string">"public-view"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">users</span>&gt;</span>*<span class="tag">&lt;/<span class="name">users</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">permissions</span>&gt;</span>view<span class="tag">&lt;/<span class="name">permissions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">security-constraints-def</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">security-constraints-def</span> <span class="attr">name</span>=<span class="string">"public-edit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">users</span>&gt;</span>*<span class="tag">&lt;/<span class="name">users</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">permissions</span>&gt;</span>view, edit<span class="tag">&lt;/<span class="name">permissions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">security-constraint</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">security-constraints-def</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">page-security</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Page"><a href="#Page" class="headerlink" title="Page"></a>Page</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Layout-Fragments"><a href="#Layout-Fragments" class="headerlink" title="Layout Fragments"></a>Layout Fragments</h2><p>The page layout <fragment> element is a hierarchical container used to hold portlet fragments and nested layout fragments. The root fragment of a page must be a layout fragment, even when only one portlet fragment is part of the page. Layout fragments are subject to layout of the parent layout fragment and thus support the ‘row’ and ‘column’ layout properties. In addition, they also support the ‘sizes’ layout property used to control multicolumn layout proportions. There are 3 required attributes for this element: </fragment></p>
<p><em>页面布局<code>&lt;fragment&gt;</code>元素是一个分层容器，用于持有portlet片段和嵌套的布局片段。页面的根片段必须是一个布局片段，即使页面只是由一个portlet片段组成。布局片段依赖于父布局片段，因此支持<code>row</code>和<code>column</code>布局特性。另外，它们还支持<code>sizes</code>布局特性，用来控制多列布局特性。它有3个必须的属性：</em></p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The required id is used to identify a fragment and must be unique across all fragments defined within the site. The value is opaque to Jetspeed2 and can follow any convention to guarantee uniqueness. Since fragments may be cached internally by Jetspeed2, any edits to exiting pages may require new ids to ensure the modifications are taken by Jetspeed2. <br><br><em>（id是片段的标识符，在站点的全部片段定义中必须是唯一的。这个值对于Jetspeed2是不透明的，可以遵循任何约定，以保证唯一性。由于片段可能会被Jetspeed2内部缓存，对退出页的任何编辑都需要新的ids，以确保修改能被Jetspeed2保存。）</em></td>
</tr>
<tr>
<td>type</td>
<td>This required attribute must be set to ‘layout’ for all layout fragments.<br><br><em>（必填项。所有布局片段都必须设置为<code>layout</code>。）</em></td>
</tr>
<tr>
<td>name</td>
<td>The required name of the portlet used to implement the fragment layout. The portlet name generally takes the form of ‘portlet-app-name:portlet-name’ where portlet-app-name is the web context name, as specified in the portlet.xml files. Here are the supported Jetspeed2 layout portlet names: <br><br><em>（portlet的name是必填项，用于实现片段布局。这个portlet命名通常来自于<code>portlet.xml</code>文件里指定的<code>portlet-app-id::portlet-id</code>。下面列出了在Jetspeed2支持的布局portlet名称：）</em><br><br>jetspeed-layouts::FrameLayoutPortlet<br>jetspeed-layouts::VelocityOneColumn<br>jetspeed-layouts::VelocityOneColumnNoActions<br>jetspeed-layouts::VelocityThreeColumns<br>jetspeed-layouts::VelocityThreeColumnsNoActions<br>jetspeed-layouts::VelocityThreeColumnsTable<br>jetspeed-layouts::VelocityTwoColumns<br>jetspeed-layouts::VelocityTwoColumns2575<br>jetspeed-layouts::VelocityTwoColumns2575NoActions<br>jetspeed-layouts::VelocityTwoColumnsNoActions<br>jetspeed-layouts::VelocityTwoColumnsSmallLeft<br>jetspeed-layouts::VelocityTwoColumnsSmallLeftNoActions<br>jetspeed-layouts::VelocityTwoColumnsTable</td>
</tr>
</tbody>
</table>
<p>The layout <fragment> element contains a number of other PSML elements: </fragment></p>
<p><em>布局<code>&lt;fragment&gt;</code>元素包含一些其他的PSML元素：</em></p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fragment*</td>
<td>Specified fragment elements can be either portlet fragments to be laid out by this layout fragment or nested layout fragments. All child fragments will have required property elements to specify their positions in this layout. Specifying no fragments within a layout fragment will result in no content being generated.<br><br><em>（指定的片段元素可以被这个布局片段或嵌套的布局片段排版。所有的子片段都必须要有<code>property</code>元素来指定它们在布局中的定位。布局片段中没有指定片段，将导致在生成时没有内容。）</em></td>
</tr>
<tr>
<td>property*</td>
<td>Layout fragments can have an optional ‘sizes’ property that can be used to specify multicolumn layout proportions. Nested layout fragments may also have ‘row’ and/or ‘column’ properties to identify its positional location in the parent layout.<br><br><em>（布局片段可以有一个<code>sizes</code>特性的设置，用于指定多列布局特性。嵌套的布局片段页也可以有<code>row</code>和/或<code>column</code>特性，来确认它自己在父布局中的定位。）</em></td>
</tr>
<tr>
<td>security-constraints?</td>
<td>Optionally defines inline security constraints for the fragment and its child fragments. Unlike, page, folder, and link constraints, only ‘view’ permissions can be constrained. If not specified, the fragment inherits the security constraints effective in the page.<br><br><em>（可以选择性地为片段和它的子片段定义内联的安全性约束。与<code>page</code>，<code>folder</code>，<code>link</code>约束不同，只有<code>view</code>权限可以被约束。如果不指定，此片段就继承在页面中定义的安全约束。）</em></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<p><em>示例：</em></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;page&gt;</span><br><span class="line">  ...</span><br><span class="line">  &lt;fragment <span class="built_in">id</span>=<span class="string">"100393"</span> type=<span class="string">"layout"</span> <span class="built_in">name</span>=<span class="string">"jetspeed-layouts::VelocityOneColumn"</span>&gt;</span><br><span class="line">    &lt;fragment <span class="built_in">id</span>=<span class="string">"100939"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::LocaleSelector"</span>&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">    &lt;/fragment&gt;                                </span><br><span class="line">    &lt;fragment <span class="built_in">id</span>=<span class="string">"100345"</span> type=<span class="string">"layout"</span> <span class="built_in">name</span>=<span class="string">"jetspeed-layouts::VelocityTwoColumns"</span>&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"sizes"</span> value=<span class="string">"33%,66%"</span>/&gt;</span><br><span class="line">      &lt;fragment <span class="built_in">id</span>=<span class="string">"100121"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::LoginPortlet"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">      &lt;/fragment&gt;                                </span><br><span class="line">      &lt;fragment <span class="built_in">id</span>=<span class="string">"100171"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"demo::UserInfoTest"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">      &lt;/fragment&gt;    </span><br><span class="line">    &lt;/fragment&gt;</span><br><span class="line">  &lt;/fragment&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/page&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Portlet-Fragments"><a href="#Portlet-Fragments" class="headerlink" title="Portlet Fragments"></a>Portlet Fragments</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Fragment-References"><a href="#Fragment-References" class="headerlink" title="Fragment References"></a>Fragment References</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Fragment-Properties"><a href="#Fragment-Properties" class="headerlink" title="Fragment Properties"></a>Fragment Properties</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Preferences"><a href="#Preferences" class="headerlink" title="Preferences"></a>Preferences</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Dynamic-Page"><a href="#Dynamic-Page" class="headerlink" title="Dynamic Page"></a>Dynamic Page</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Page-Template"><a href="#Page-Template" class="headerlink" title="Page Template"></a>Page Template</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Page-Fragment"><a href="#Page-Fragment" class="headerlink" title="Page Fragment"></a>Page Fragment</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Fragment-Definition"><a href="#Fragment-Definition" class="headerlink" title="Fragment Definition"></a>Fragment Definition</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Folder"><a href="#Folder" class="headerlink" title="Folder"></a>Folder</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="Global-Page-Security"><a href="#Global-Page-Security" class="headerlink" title="Global Page Security"></a>Global Page Security</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="PSML-Titles-and-Metadata"><a href="#PSML-Titles-and-Metadata" class="headerlink" title="PSML Titles and Metadata"></a>PSML Titles and Metadata</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="PSML-Defaults"><a href="#PSML-Defaults" class="headerlink" title="PSML Defaults"></a>PSML Defaults</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="PSML-Security-Constraints"><a href="#PSML-Security-Constraints" class="headerlink" title="PSML Security Constraints"></a>PSML Security Constraints</h2><blockquote>
<p>未翻译</p>
</blockquote>
<h2 id="PSML-Menus"><a href="#PSML-Menus" class="headerlink" title="PSML Menus"></a>PSML Menus</h2><blockquote>
<p>未翻译</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/06/Jetspeed-PSML翻译/" data-id="cimsgq7zk0004noloblmrcyws" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Jetspeed-Template翻译" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/06/Jetspeed-Template翻译/" class="article-date">
  <time datetime="2016-04-06T06:46:12.000Z" itemprop="datePublished">2016-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/06/Jetspeed-Template翻译/">Jetspeed官方手册-Template</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/deployguide/guide-page-templates.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="Introduction-to-PSML-Templates"><a href="#Introduction-to-PSML-Templates" class="headerlink" title="Introduction to PSML Templates"></a>Introduction to PSML Templates</h2><p>In the 2.2.1 release of Jetspeed, we introduced three new kinds of PSML templates: </p>
<ul>
<li>Template Pages (TPSML)</li>
<li>Fragment Definitions (FPSML)</li>
<li>Dynamic Template Pages (DPSML)</li>
</ul>
<p><em>在Jetspeed 2.2.1发布版中，我们引入了三种全新的PSML模板：</em></p>
<ul>
<li><em>模板页 (TPSML)</em></li>
<li><em>片段定义 (FPSML)</em></li>
<li><em>动态模板页 (DPSML)</em></li>
</ul>
<p>Templates are a special kind of re-usable PSML page. Templates centralize the declaration of portlets and page layout once, which can then be reused on many pages. Templates can save you lots of configuration time maintaining portlets on your pages. And administrator can add or remove a portlet to a template, and all pages associated with that template will pick up those portlets immediately. When you have many pages, templates can save you lots of administration time in publishing changes to each and every page in the system. Templates can also be secured, so that only administrators can modify them. This means that you can enforce sets of pages to always display certain portlets, for example in the left or right column. By securing the template, the templasized portlets are locked in place: they cannot be deleted or moved by the end user, only the administrator can edit the portlets in the template. However, the portlets declared on the merged page can be maintained normally by the end user, based on the security constraints of the target page. </p>
<p><em>模板是一种特殊类型的可复用PSML页面。模板一旦在portlets和页面布局中集中声明，就可以在很多页面中重用。在你维护页面上的portlet时，模板可以节省你大量的配置时间。并且管理员可以通过模板来添加或删除一个portlet，而且所有与模板有关的页面将会立即检出这些portlet。当你有很多页面时，系统中的每个页面在发布更改时，模板可以节省你大量的管理时间。模板还可以保证安全，以便只有管理员才可以对其进行修改。这意味着，你可以强制页面总是显示某些portlet，比如在左边或右边的列。通过保护模板，portlet可以被锁定到位：它们不能被最终用户删除或修改，模板中的portlet只能被管理员编辑。然而，基于目标页的安全约束，合并页面中声明的portlet通常可以由最终用户来维护。</em></p>
<p>As of version 2.3.0, you cannot edit templates (TPSML, FPSML, DPSML) using the Jetspeed configuration tools. This means they must be edited as XML and then imported into the system. Future versions will support full customization of templates.</p>
<p><em>在2.3.0版本中，你不能用Jetspeed配置工具来编辑模板（TPSML, FPSML, DPSML）。这意味着他们必须被当做XML来编辑，并导入到系统中。未来的版本将支持完全自定义的模板。</em></p>
<h2 id="TPSML-Template-Pages"><a href="#TPSML-Template-Pages" class="headerlink" title="TPSML - Template Pages"></a>TPSML - Template Pages</h2><p>Template pages are used in combination with addressable PSML pages to create a merged view of a PSML page with the template. Template Pages are not addressable by URL: therefore you can never visit a template page. Templates are usually defined in enclosing folders, and are automatically merged with all pages in that folder and subfolders. There is a limitation that only one page template can be defined per folder. Templates placed in subfolders will override the template placed in a parent folder. Introducing a template page into the PSML system is as simple as dropping the .tpsml file into the file system (or you can use the Import administrative tool if you are storing PSML in the database).</p>
<p><em>模板页可以与可寻址的PSML页结合使用，来创建带模板的PSML页面视图。模板页不能通过URL来寻址：因此你永远不能访问到一个模板页。模板通常定义在封闭的文件夹中，并自动合并到那个文件夹及子文件夹中的所有页面里。这有个限制，在每个文件夹中只能定义一个页面模板。放在子文件夹中的模板将会覆盖父文件夹中的模板。在PSML系统中引入页面模板很简单，只要将.tpsml文件放到文件系统中（或者你可以使用导入管理工具，如果你在数据库中存储PSML）。</em></p>
<p>Templates were first introduced in version 2.2.1. If you download and run the Jetspeed demo, navigate to <a href="http://localhost:8080/jetspeed/portal" target="_blank" rel="external">http://localhost:8080/jetspeed/portal</a>, you will see an example of templates in action on the welcome page as shown in the screen shot below… </p>
<p><em>模板首先在2.2.1版本中被引入。如果你下载并运行了Jetspeed演示，导航到<a href="http://localhost:8080/jetspeed/portal" target="_blank" rel="external">http://localhost:8080/jetspeed/portal</a> ，你将会在活动的欢迎页中看到一个模板的例子，就像下面的截图显示的一样…</em></p>
<p><img src="http://portals.apache.org/jetspeed-2/deployguide/images/welcome-page.png" alt="welcome-page"></p>
<p>The two portlets found in the far left and far right column are the Jetspeed Toolbox and Page Navigator portlets. These portlets are declared in a template, not in the actual pages (.psml). On the Page Navigator, press the Websites link, navigating to <a href="http://localhost:8080/jetspeed/portal/frames.psml" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/frames.psml</a>. You will again see the Jetspeed Toolbox and and Page Navigator portlets. These two portlets were declared only once, in a Page Template, not on each page. </p>
<p><em>在最左边和最右边的列中找到两个portlet，分别是Jetspeed工具箱portlet和页面导航器portlet。这些portlet是在模板中声明，而不是在实际的页面（.psml）中。在页面导航器中，按照web站点链接，导航到<a href="http://localhost:8080/jetspeed/portal/frames.psml" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/frames.psml</a> 。你将再次看到Jetspeed工具箱portlet和页面导航器portlet。这两个portlet只在页面模板中声明了一次，而不是在每个页面中声明。</em></p>
<p>As the visual below demonstrates, page templates merge a template with an addressable page, resulting in the displaying of a merged page: </p>
<p><em>正如下面的视觉展示，页面模板与一个可寻址的页合并为一个模板，从而显示了一个合并的页面：</em></p>
<p><img src="http://portals.apache.org/jetspeed-2/deployguide/images/PageTemplateMerged.png" alt="PageTemplateMerged"></p>
<p><em>How to Create a Page Template</em></p>
<p>In this section, you will learn how to create your own template pages (TPSML) in Jetspeed. Note that all the examples included here were testing on the Classic (Portal) Pipeline (/jetspeed/portal) with the 2.3.0 release of Jetspeed. Templates are designed to work with both the JetUI Pipeline as well as the Classic Pipeline. However, the JetUI pipeline has some special requirements, most notably is that it treats the Page Navigator and Toolbox as special portlets, and expects them to always be on all templates. The Classic Pipeline does not have any restrictions as of version 2.3.0. Another important issue to be aware of - up through version 2.3.0, templates may only be defined in XML definitions. There are no customization features for creating these templates with the Jetspeed customizer. Future releases will provide template customizers. To learn more about using templates with the JetUI Pipeline, read the JetUI documentation. The remainder of this document assumes you are using the Classic (/portal) pipeline. To learn more about using pipelines, read the Pipelines documentation.</p>
<p><em>在这部分，你将会学习怎样在Jetspeed中创建你自己的模板页（TPSML）。注意：这里包含的全部示例都经过了Jetspeed 2.3.0发布版的经典（Portal）管道（/jetspeed/portal）测试。模板被设计为既可以在所有的JetUI管道中，又可以在经典管道中工作。然而，JetUI 管道有一些特殊的要求，最值得注意的是它的页面导航器和工具箱视为特殊的portlet，并期望它们总是能够要在所有模板上运行。在2.3.0版本中，经典管道没有任何限制。另一个重要的问题是意识到通过2.3.0版本升级，模板只能在XML中定义。在Jetspeed定制器中没有创建模板的自定义功能。将来的版本将提供模板定制。若要了解通过JetUI管道使用模板的详细信息，请阅读JetUI文档。本文档的其余部分假定你使用的经典（Portal）管道。若要了解使用管道的详细信息，请阅读管道文档。</em></p>
<p>Lets get started creating a new page template. You will need to have Jetspeed running in order to facilitate demonstrating how templates work. First, start up Jetspeed, navigate to <a href="http://localhost:8080/jetspeed/portal" target="_blank" rel="external">http://localhost:8080/jetspeed/portal</a>, and login to the demo system with the admin user, password also admin. Navigate to any other page with the Page Navigator. You will always see the Page Navigator portlet in the left column, and the Jetspeed Toolbox in the right column. The end user cannot remove these portlets with the Jetspeed Customizer, not even the admin user. No matter which page you navigate to, you will see the default system template that comes with the demo. This template file is template.tpsml, and it is located in the pages directory of the demo distribution. (If you built Jetspeed from source, it will be located in WEB-INF/pages). Lets override the page template for the Admin user home space. Remember that spaces are accessible from the drop down menu in the Jetspeed header. From the Spaces menu, select My Pages. Selecting My Pages will display a page located at the URL <a href="http://localhost:8080/jetspeed/portal/_user/admin" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/_user/admin</a> On the file system, the home space for the admin user is actually located under pages/_user/admin. Go ahead and find that directory on your file system before proceeding.</p>
<p><em>我们开始创建一个新的页面模板。你需要运行Jetspeed，以便演示模板是如何工作的。首先，启动Jetspeed，导航到<a href="http://localhost:8080/jetspeed/portal" target="_blank" rel="external">http://localhost:8080/jetspeed/portal</a> ，以管理员身份登录演示系统，密码也是admin。用页面导航器导航到其他页。你总会在左列看到页面导航器portlet，在右列看到Jetspeed工具箱portlet。最终用户不能使用Jetspeed定制器来移动这些portlet，连管理员也不能。不论你导航到哪一页，您将看到默认系统模板附带的演示。这个模板文件是<code>template.tpsml</code>，它位于演示发布的页目录。（如果你是由源码构建的Jetspeed，它将位于WEB-INF/pages）让我们在管理员的工作空间内重写这个页面模板。记住，空间是从Jetspeed头部的下拉菜单来访问。从空间菜单，选择<code>My Pages</code>。选择<code>My Pages</code>将显示位于文件系统中的<a href="http://localhost:8080/jetspeed/portal/_user/admin" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/_user/admin</a> 的页面，管理员的工作空间实际是位于pages/_user/admin下的。继续，在你之前的文件系统上找到该目录。</em></p>
<p>Now bring up a text editor, and create an empty file named template.tpsml. Place that file in the pages/_user/admin folder. Jetspeed will now automatically use your new template for all pages in that folder (and any subfolder of the pages/_user/admin space folder). When creating a Page Template, you will want to reference the Jetspeed 2.2 XML Schemas. You can find the XML Schema declaration here: <a href="http://portals.apache.org/jetspeed-2/2.2/schemas/tpsml.xsd" target="_blank" rel="external">http://portals.apache.org/jetspeed-2/2.2/schemas/tpsml.xsd</a>“ All of your page template TPSML pages should start as follows…</p>
<p><em>现在打开文本编辑器，创建一个名为<code>template.tpsml</code>的文件。把它放到<code>pages/_user/admin</code>文件夹里。Jetspeed将自动给此文件夹（和它的子文件夹）下的所有文件应用新的模板。当创建页面模板时，你可能要参考Jetspeed 2.2 XML模式。你可以通过<code>http://portals.apache.org/jetspeed-2/2.2/schemas/tpsml.xsd</code>来找到此模式的说明。你全部的TPSML页面模板应当像下面这样开始…</em></p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;page-template id=<span class="string">"definition"</span></span><br><span class="line">    xmlns=<span class="string">"http://portals.apache.org/jetspeed"</span></span><br><span class="line">    <span class="attribute">xmlns</span>:<span class="attribute">xsi="http</span>:<span class="comment">//www.w3.org/2001/XMLSchema-instance" </span></span><br><span class="line">    <span class="attribute">xsi</span>:<span class="attribute">schemaLocation="http</span>:<span class="comment">//portals.apache.org/jetspeed http://portals.apache.org/jetspeed-2/2.2/schemas/tpsml.xsd"&gt;</span></span><br></pre></td></tr></table></figure>
<p>The root tag must always be declared as <page-template>. Page templates are an extension of plain PSML pages. Page templates can have many of the same XML elements as a page such as titles and fragments. Recommend becoming familiar with standard PSML pages before continuing. However, there are some important differences: </page-template></p>
<ul>
<li>The fragments that you define in your page template will be merged with all pages in the same folder, and sub-folders, unless a sub-folder overrides it with its own template</li>
<li>You must declare one and only one <page-fragment> tag. This is the place holder for the referenced page which will be merged with the template</page-fragment></li>
</ul>
<p><em>根标签必须总是声明为<code>&lt;page-template&gt;</code>。页面模板是普通PSML页的扩展。做为一个页面，页面模板可以由很多相同的XML元素，比如标题和片段。在继续之前，推荐要熟悉标准的PSML页面。然而，这里有些重要的区别：</em></p>
<ul>
<li><em>在你的页面模板中定义的片段将会被同一文件夹下的所有页面合并，包括子文件夹，除非子文件夹内重写了它自己的模板</em></li>
<li><em>你必须声明并且仅仅声明一个<code>&lt;page-fragment&gt;</code>标签。这是个将要合并的模板重的引用页面的占位符。</em></li>
</ul>
<p>The <page-fragment> tag is important. It declares where the current page will be inserted and merge into your template. </page-fragment></p>
<p><em><code>&lt;page-fragment&gt;</code>标签是很重要的。它声明了当前页面将要插入和合并到你的模板中的位置。</em></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">..</span><br><span class="line">    &lt;page-fragment <span class="built_in">id</span>=<span class="string">"template-admin-home"</span>&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">    &lt;/page-fragment&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Notice that a page-fragment can have typical fragment attributes like id as well as sub-elements like row and column. The page-fragment tag is the place holder for the addressable page. The addressable page is merged in at this point, specified by the optional row and column properties, combining the template fragments with the fragments from the addressable page. Here is a complete template page definition for the admin home space. Go ahead and cut and paste this example into your text editor and save the file under pages/_user/admin/template.tpsml: </p>
<p><em>注意：page-fragment可以有标准的片段属性，比如像id，子元素一样也有，比如row和column。page-fragment标签是可访问页面的占位符。在此处被合并的可访问页面，被规定了row和column属性，它的片段与模板片段联合使用。这里有一个完整的定义了管理员工作区域的模板页。继续，剪切和粘贴这个示例代码到你的文本编辑器中，并保存到<code>pages/_user/admin/template.tpsml</code>文件里：</em></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml <span class="built_in">version</span>=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;page-template <span class="built_in">id</span>=<span class="string">"admin-definition"</span></span><br><span class="line">    xmlns=<span class="string">"http://portals.apache.org/jetspeed"</span></span><br><span class="line">    xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">    xsi:schemaLocation=<span class="string">"http://portals.apache.org/jetspeed http://portals.apache.org/jetspeed-2/2.2/schemas/tpsml.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">  &lt;title&gt;Example Template&lt;/title&gt;</span><br><span class="line">  &lt;fragment <span class="built_in">id</span>=<span class="string">"example-template-top"</span> type=<span class="string">"layout"</span> <span class="built_in">name</span>=<span class="string">"jetspeed-layouts::VelocityThreeColumns"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"sizes"</span> value=<span class="string">"15%,70%,15%"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line"></span><br><span class="line">   &lt;fragment <span class="built_in">id</span>=<span class="string">"example-left"</span> type=<span class="string">"layout"</span> <span class="built_in">name</span>=<span class="string">"jetspeed-layouts::VelocityOneColumn"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"0"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">		&lt;fragment <span class="built_in">id</span>=<span class="string">"example-locale"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::LocaleSelector"</span>&gt;</span><br><span class="line">            &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span> /&gt;</span><br><span class="line">             &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"0"</span> /&gt;</span><br><span class="line">         &lt;/fragment&gt;</span><br><span class="line">        &lt;/fragment&gt;</span><br><span class="line"></span><br><span class="line">    &lt;page-fragment <span class="built_in">id</span>=<span class="string">"example-page-template"</span>&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"1"</span>/&gt;</span><br><span class="line">      &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>/&gt;</span><br><span class="line">    &lt;/page-fragment&gt;</span><br><span class="line"></span><br><span class="line">   &lt;fragment <span class="built_in">id</span>=<span class="string">"example-right"</span> type=<span class="string">"layout"</span> <span class="built_in">name</span>=<span class="string">"jetspeed-layouts::VelocityOneColumn"</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"2"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">		&lt;fragment <span class="built_in">id</span>=<span class="string">"example-forgotten"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::ForgottenPasswordPortlet"</span>&gt;</span><br><span class="line">                &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"0"</span> /&gt;</span><br><span class="line">                &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"0"</span> /&gt;</span><br><span class="line">        &lt;/fragment&gt;</span><br><span class="line">   &lt;/fragment&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/fragment&gt;</span><br><span class="line">&lt;/page-template&gt;</span><br></pre></td></tr></table></figure>
<p>Refresh the page <a href="http://localhost:8080/jetspeed/portal/_user/admin" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/_user/admin</a>. You should now see some differences: like the Navigator and Toolbox are gone, and in their place are the portlets that you defined above, namely the Local Selector and Forgotten Password Portlet. Take a closer look at the XML file. Notice that we are using Jetspeed layout portlets to define the layout of the templacized page. In this example, we have a three column layout. The left column is defined by the example-left fragment. The middle column is key: this is our page-template and it will hold the actual PSML page. The right column is defined by the example-right fragment. When the template is merged with the page that you navigate to, the end result will contain a left and right column from the template, and a middle column containing the referenced page. This referenced page can have its own layout. For example if the referenced page has two columns, then the resulting merged page will have four columns, two from the template, and two from the included page. </p>
<p><em>刷新<a href="http://localhost:8080/jetspeed/portal/_user/admin" target="_blank" rel="external">http://localhost:8080/jetspeed/portal/_user/admin</a> 。你现在会看到一些不同：页面导航器和工具箱没有了，在它们的位置上是你定义的portlet，名为本地化和忘记密码的portlet。仔细看XML文件。注意：我们使用了Jetspeed布局portlet来定义模板页的布局。在这个示例中，我们使用了三列的布局。左列是由<code>example-left</code>片段定义的。关键是中间列：这是我们的页面模板，它将控制真正的PSML页。右列是由<code>example-right</code>片段定义的。当模板合并你导航到的页面时，最终结果是将包含模板的左右列，以及引用到目标页内容的中间列。引用的页面可以有它自己的布局。例如，如果引用页有两列，那么合并的结果页将会有四列，两列来自模板，两列来自包含的页面。</em></p>
<p>There is a problem though. First problem, you are stuck on this page, there are no longer any navigations available to you. Lets fix that by adding a Space Navigator to your template. Paste this code fragment into your file just above the fragment with an id of example-left and save the file:</p>
<p><em>但这就有问题了。第一个问题，你被卡在这个页面上了，这儿没有任何可用的导航。让我们往你的模板里添加一个空间导航来修复它。将下面的代码粘贴到id为<code>example-left</code>的片段之前，并保存：</em></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;fragment <span class="built_in">id</span>=<span class="string">"jsSpaceNavigator"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::SpaceNavigator"</span> decorator='clear'&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"y"</span> value=<span class="string">"300"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"x"</span> value=<span class="string">"20"</span>&gt;&lt;/<span class="keyword">property</span>&gt;            </span><br><span class="line">        &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"state"</span> value=<span class="string">"detach"</span>&gt;&lt;/<span class="keyword">property</span>&gt;                        </span><br><span class="line">&lt;/fragment&gt;</span><br></pre></td></tr></table></figure>
<p>Refresh the page. You should now see a Space Navigator in the top area of your page. An interesting aspect of this fragment is that it is detached and placed at a specific coordinate on the page. Detached portlets are placed in a different plane than flow-driven layout portlets, whose positions are relative to their placement in the PSML definition. To read more about detached portlets see the JetUI documentation. </p>
<p><em>刷新这个页面。你现在应该能看到在页面的顶部有一个空间导航了。这个片段一个有趣的方面是：它位于一个特殊的坐标上，脱离了页面。脱离的portlet相对于流驱动布局的portlet来说，它位于一个不同的平面，流驱动布局的portlet在PSML中定义的位置是相对的定位。若要了解脱离的portlet的详细信息，请阅读<a href="http://portals.apache.org/jetspeed-2/deployguide/guide-jetui.html" target="_blank" rel="external">JetUI文档</a>。</em></p>
<p>There is another problem. We cannot navigate within the My Pages folder. In order to do that we need a Page Navigator. Lets add one to the template, so that all the pages in this folder can use it. Paste in the code snipped below immediately after the fragment end tag of the fragment with an id of example-locale: </p>
<p><em>还有另外一个问题。我们不能在<code>My Pages</code>文件夹内导航。为达到这一目的，我们需要一个页面导航。让我们往模板里添加一个，以便这个文件夹中的全部页面都能用。立即剪切下面的代码到id为<code>example-locale</code>的片段结束标签的后边：</em></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;fragment <span class="built_in">id</span>=<span class="string">"jsPageNavigator"</span> type=<span class="string">"portlet"</span> <span class="built_in">name</span>=<span class="string">"j2-admin::PageNavigator"</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"row"</span> value=<span class="string">"1"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"column"</span> value=<span class="string">"0"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"state"</span> value=<span class="string">"normal"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"tool"</span> value=<span class="string">"true"</span>&gt;&lt;/<span class="keyword">property</span>&gt;</span><br><span class="line">&lt;/fragment&gt;</span><br></pre></td></tr></table></figure>
<p>Refresh the page. You should now see a page navigator portlet immediately below the Locale Selector portlet on the left hand side of the page. As you navigate to other pages in this folder, such as the My Account page, you should always still see our four portlets from the template (Locale Selector, Page Navigator, Forgotten Password, and the Space Navigator). </p>
<p><em>刷新这个页面。你现在应该能看到在页面左边的本地化portlet下面，有一个页面导航portlet。随着你导航到这个文件夹下的其他页面，例如<code>我的账户</code>页面，你还是应该看到我们的这四个来自模板中的portlet（本地化，页面导航，忘记密码，以及空间导航）。</em></p>
<p>We hope these examples helped getting you started using page templates in Jetpeed. If you have further questions, do not be shy about asking questions on the Jetspeed Users List. </p>
<p><em>但愿这些例子可以在你开始使用页面模板时有所帮助。如果你有其他问题，到Jetspeed用户列表提问时也不要害羞。</em></p>
<h2 id="FPSML-Fragment-Definitions"><a href="#FPSML-Fragment-Definitions" class="headerlink" title="FPSML - Fragment Definitions"></a>FPSML - Fragment Definitions</h2><p>Fragment Definition Pages are buckets for declaring reusable portlet definitions which can then be referenced and placed in normal PSML files. Whereas TPSML pages also follow a reuse pattern, FPSML is similar but solves a slightly different case. TPSML is reuse by template. You will always get the entire layout of the template. Your page is included inside the template. The FPSML use case is different. With FPSML, your page will is the container where fragment definitions are included into the your page. </p>
<p><em>未翻译…</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/06/Jetspeed-Template翻译/" data-id="cimsgq7zt000dnolo86nabels" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Jetspeed-Layouts翻译" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/01/Jetspeed-Layouts翻译/" class="article-date">
  <time datetime="2016-04-01T05:34:48.000Z" itemprop="datePublished">2016-04-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/Jetspeed/">Jetspeed</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/01/Jetspeed-Layouts翻译/">Jetspeed官方手册-Layouts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://portals.apache.org/jetspeed-2/devguide/guide-layouts.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="Layouts"><a href="#Layouts" class="headerlink" title="Layouts"></a>Layouts</h2><p>Layout templates are packaged in special Jetspeed-specific and deployable portlet applications. Layout templates control the overall aggregation of a portal page. Layout templates are combined with portlets, providing a component model for aggregation. Jetspeed-2 comes out of the box with several layout components including one, two and three column layouts. See the Jetspeed-2 Layouts below for all available Layouts in the default Jetspeed-2 system. Of course you can define and derive your own layouts. </p>
<p><em>布局模板被打包成特殊的Jetspeed特定和可部署的portlet应用程序。布局模板控制着整体聚合的门户页面。布局模板结合portlet，为聚合提供一个组件模型。Jetspeed-2开箱即用带有几个布局组件包括一、 二、 三列布局。在下面可以看到在Jetspeed-2默认系统中所有可用的布局。当然你可以定义和派生您自己的布局。</em></p>
<p>With regards to aggregation, layouts define how a single portal page is aggregated. A layout defines the fashion in which grouping of fragments will organized relative to the final, aggregated content of a request to the portal. Layouts are defined by a portlet which applies an algorithm to a template to generate the aggregated content of a page. Typical algorithms are two column, three column, nested. </p>
<p><em>关于聚合，布局定义了单个门户页面是如何聚合的。在片段组中定义的布局将会组织好请求到门户的最终聚合内容的风格。被定义成一个portlet的布局，由应用系统的算法生成为聚合了页面内容的模板。典型的算法是两列，三列，嵌套。</em></p>
<p>A layout is made up of: </p>
<ul>
<li>One or more templates</li>
<li>A template descriptor</li>
<li>Images</li>
<li>A Stylesheet (CSS)</li>
<li>Macros</li>
</ul>
<p><em>一个布局组成如下 ︰</em></p>
<ul>
<li><em>一个或多个模板</em></li>
<li><em>一个模板描述符板</em></li>
<li><em>图像</em></li>
<li><em>一个样式表 (CSS)</em></li>
<li><em>宏</em></li>
</ul>
<p><img src="http://portals.apache.org/jetspeed-2/devguide/images/layouts-overview.png" alt="layouts-overview"></p>
<h2 id="Layouts-Packaging"><a href="#Layouts-Packaging" class="headerlink" title="Layouts Packaging"></a>Layouts Packaging</h2><p>Layouts are packaged as standard portlet applications. Layouts usual have a Operations Supported:</p>
<ul>
<li>Deploy</li>
<li>Un-deploy</li>
<li>Re-deploy</li>
</ul>
<p><em>布局被打包成一个标准的portlet应用。布局通常支持的操作有：</em></p>
<ul>
<li><em>部署</em></li>
<li><em>解除部署</em></li>
<li><em>重新部署</em></li>
</ul>
<h2 id="Jetspeed-2-Layouts"><a href="#Jetspeed-2-Layouts" class="headerlink" title="Jetspeed-2 Layouts"></a>Jetspeed-2 Layouts</h2><p>Jetspeed-2 comes out of the box with several layout components including one, two and three column layouts. Of course you can define and derive your own layouts. The table below lists the available layout components in Jetspeed. When customizing (editing) a page, the layout component is selected. One layout may be assigned per PSML page. </p>
<p><em>Jetspeed-2开箱即用带有几个布局组件，包括一、 二、 三列布局。当然你可以定义和派生您自己的布局。下表列出了在Jetspeed中可用的布局组件。当自定义（编辑）一个页面时，布局组件就被选中了。一种布局可能被分配给每 PSML页。</em></p>
<table>
<thead>
<tr>
<th>Layout</th>
<th>Type</th>
<th style="text-align:center">Columns</th>
<th style="text-align:center">Sizes</th>
<th>Modes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VelocityOneColumn</td>
<td>OneColumn</td>
<td style="text-align:center">1</td>
<td style="text-align:center">100%</td>
<td>view,edit,help</td>
<td>A single column display of one or more fragments taking up 100% of the portlet display area.</td>
</tr>
<tr>
<td>VelocityTwoColumns</td>
<td>TwoColumns</td>
<td style="text-align:center">2</td>
<td style="text-align:center">50%,50%</td>
<td>view,edit,help</td>
<td>A two column display of one or more fragments where each column is allocated to 50% of the portlet display area respectively. Fragments may be placed in either column using PSML fragment definitions.</td>
</tr>
<tr>
<td>VelocityTwoColumnsSmallLeft</td>
<td>TwoColumns</td>
<td style="text-align:center">2</td>
<td style="text-align:center">15%,85%</td>
<td>view,edit,help</td>
<td>A two column display of one or more fragments where the left column is allocated to 15% of the portlet display area, and the right column is allocated to 85% of the portlet display area. Fragments may be placed in either column using PSML fragment definitions.</td>
</tr>
<tr>
<td>VelocityThreeColumns</td>
<td>ThreeColumns</td>
<td style="text-align:center">3</td>
<td style="text-align:center">33%,33%,33%</td>
<td>view,edit,help</td>
<td>A three column display of one or more fragments where each column is allocated to 33% of the portlet display area respectively. Fragments may be placed in either column using PSML fragment definitions.</td>
</tr>
<tr>
<td>VelocityOneColumnNoActions,<br>VelocityTwoColumnsNoActions,<br>VelocityThreeColumnsNoActions</td>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td>view</td>
<td>Same parameters as their counterparts with actions, but no decorator actions are displayed.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>布局</th>
<th>类型</th>
<th style="text-align:center">列</th>
<th style="text-align:center">尺寸</th>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>VelocityOneColumn</td>
<td>OneColumn</td>
<td style="text-align:center">1</td>
<td style="text-align:center">100%</td>
<td>查看、 编辑、 帮助</td>
<td>用单个列，列占用portlet的100%区域来显示一个或多个片段。</td>
</tr>
<tr>
<td>VelocityTwoColumns</td>
<td>TwoColumns</td>
<td style="text-align:center">2</td>
<td style="text-align:center">50%,50%</td>
<td>查看、 编辑、 帮助</td>
<td>用两列，每列分别占用portlet的50%区域来显示一个或多个片段。每列中的片段可以被PSML定义的片段替换。</td>
</tr>
<tr>
<td>VelocityTwoColumnsSmallLeft</td>
<td>TwoColumns</td>
<td style="text-align:center">2</td>
<td style="text-align:center">15%,85%</td>
<td>查看、 编辑、 帮助</td>
<td>用两列，左列占用portlet的15%区域，右列占用portlet的85%区域，来显示一个或多个片段。每列中的片段可以被PSML定义的片段替换。</td>
</tr>
<tr>
<td>VelocityThreeColumns</td>
<td>ThreeColumns</td>
<td style="text-align:center">3</td>
<td style="text-align:center">33%,33%,33%</td>
<td>查看、 编辑、 帮助</td>
<td>用三列，每列分别占用portlet的33%区域来显示一个或多个片段。每列中的片段可以被PSML定义的片段替换。</td>
</tr>
<tr>
<td>VelocityOneColumnNoActions,<br>VelocityTwoColumnsNoActions,<br>VelocityThreeColumnsNoActions</td>
<td></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td>查看</td>
<td>将显示相同的同行与行动，但没有装饰的操作参数。</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/01/Jetspeed-Layouts翻译/" data-id="cimsgq7z80001noloftgr5ayw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jetspeed/">Jetspeed</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-桃花庵歌" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/29/桃花庵歌/" class="article-date">
  <time datetime="2016-03-29T08:44:00.000Z" itemprop="datePublished">2016-03-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/测试/">测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/29/桃花庵歌/">桃花庵歌</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>桃花庵歌<br>朝代：明代<br>作者：唐寅<br>原文：<br>桃花坞里桃花庵，桃花庵下桃花仙。<br>桃花仙人种桃树，又折花枝当酒钱。<br>酒醒只在花前坐，酒醉还须花下眠。<br>花前花后日复日，酒醉酒醒年复年。<br>不愿鞠躬车马前，但愿老死花酒间。<br>车尘马足贵者趣，酒盏花枝贫者缘。<br>若将富贵比贫贱，一在平地一在天。<br>若将贫贱比车马，他得驱驰我得闲。<br>世人笑我太疯癫，我笑世人看不穿。<br>记得五陵豪杰墓，无酒无花锄作田。</p>
<p>土匪国里土匪党，土匪党下土匪帮；<br>土匪党帮串豪富，又杀平民夺产田<br>人前高叫是公仆，背后尽把财色贪；<br>半败半腐日复日，贪财贪色年复年<br>但愿老死权贵间，不愿鞠躬屁民前；<br>天上人间权者趣，海天盛筵富者缘<br>若将民主比专政，一在平地一在天；<br>若将专政比垄断，它占资源又弄权<br>别人笑我太疯癫，我笑他人看不穿；<br>舔菊五毛遍地是，无数脑残评论员<br>还有成批奴才狗，砖家叫兽扎堆骗；<br>寡廉鲜耻当高尚，贱卖灵魂辱祖先！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/29/桃花庵歌/" data-id="cimsgq80h0017nolor2rrz3bv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/测试/">测试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/28/test/" class="article-date">
  <time datetime="2016-03-28T02:30:48.000Z" itemprop="datePublished">2016-03-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/全部/">全部</a>►<a class="article-category-link" href="/categories/全部/测试/">测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/28/test/">这是一篇测试文章</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="测试一个"><a href="#测试一个" class="headerlink" title="测试一个"></a>测试一个</h3><p><strong>呵呵</strong></p>
<blockquote>
<p>走起—!aaa</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/28/test/" data-id="cimsgq7zy000gnolo54swouf2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/测试/">测试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/23/hello-world/" class="article-date">
  <time datetime="2016-03-23T02:02:06.168Z" itemprop="datePublished">2016-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/23/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/23/hello-world/" data-id="cimsgq7zn0007nolo73rxjn01" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/全部/">全部</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/全部/Jetspeed/">Jetspeed</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/全部/测试/">测试</a><span class="category-list-count">2</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jetspeed/">Jetspeed</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Jetspeed/" style="font-size: 20px;">Jetspeed</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/09/Jetspeed-指南-Customizing Your Portal Design翻译-02/">Jetspeed官方指南-自定义你的门户设计-02</a>
          </li>
        
          <li>
            <a href="/2016/04/08/Jetspeed-指南-Customizing Your Portal Design翻译-01/">Jetspeed官方指南-自定义你的门户设计-01</a>
          </li>
        
          <li>
            <a href="/2016/04/07/Jetspeed-Decorators翻译/">Jetspeed官方手册-Decorators</a>
          </li>
        
          <li>
            <a href="/2016/04/06/Jetspeed-PSML翻译/">Jetspeed官方手册-PSML</a>
          </li>
        
          <li>
            <a href="/2016/04/06/Jetspeed-Template翻译/">Jetspeed官方手册-Template</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 bigdipper<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="http://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>